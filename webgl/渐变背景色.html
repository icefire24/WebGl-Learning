<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <canvas></canvas>
</body>
<script>
    function createProgram(gl, vertexShaderSource, fragmentShaderSource) {
        // 创建顶点着色器
        var vertexShader = gl.createShader(gl.VERTEX_SHADER);
        gl.shaderSource(vertexShader, vertexShaderSource);
        gl.compileShader(vertexShader);
        if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {
            console.error("Vertex shader compilation failed:", gl.getShaderInfoLog(vertexShader));
            return null;
        }

        // 创建片段着色器
        var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
        gl.shaderSource(fragmentShader, fragmentShaderSource);
        gl.compileShader(fragmentShader);
        if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {
            console.error("Fragment shader compilation failed:", gl.getShaderInfoLog(fragmentShader));
            return null;
        }

        // 创建WebGL程序并连接着色器
        var program = gl.createProgram();
        gl.attachShader(program, vertexShader);
        gl.attachShader(program, fragmentShader);
        gl.linkProgram(program);
        if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
            console.error("Program linking failed:", gl.getProgramInfoLog(program));
            return null;
        }

        return program;
    }

    // 顶点着色器代码
    var vertexShaderSource = `
attribute vec2 a_position;
void main() {
  gl_Position = vec4(a_position, 0, 1);
}`;

    // 片段着色器代码
    var fragmentShaderSource = `
precision mediump float;

uniform vec4 u_colorTop;
uniform vec4 u_colorBottom;

void main() {
  gl_FragColor = mix(u_colorTop, u_colorBottom, gl_FragCoord.y / 480.0);
}`;

    // 创建WebGL程序
    var canvas = document.querySelector("canvas");
    var gl = canvas.getContext("webgl");
    var program = createProgram(gl, vertexShaderSource, fragmentShaderSource);
    gl.useProgram(program);

    // 定义顶点数据
    var positionAttributeLocation = gl.getAttribLocation(program, "a_position");
    var positionBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
        -1.0, -1.0,
        1.0, -1.0,
        -1.0, 1.0,
        1.0, 1.0,
    ]), gl.STATIC_DRAW);
    gl.enableVertexAttribArray(positionAttributeLocation);
    gl.vertexAttribPointer(positionAttributeLocation, 2, gl.FLOAT, false, 0, 0);

    // 设置渐变色
    var colorTopUniformLocation = gl.getUniformLocation(program, "u_colorTop");
    var colorBottomUniformLocation = gl.getUniformLocation(program, "u_colorBottom");
    gl.uniform4f(colorTopUniformLocation, 1.0, 0.0, 0.0, 1.0); // 顶部颜色为红色
    gl.uniform4f(colorBottomUniformLocation, 0.0, 0.0, 1.0, 1.0); // 底部颜色为蓝色

    // 绘制图形
    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);

</script>

</html>